import{e as D,c as Me,C as He,b as Ne,v as Oe,a as De}from"./creature-DsdPZHyU.js";/*!
 * iro.js v5.5.2
 * 2016-2021 James Daniel
 * Licensed under MPL 2.0
 * github.com/jaames/iro.js
 */var b,L,ve,J,ge,A={},ne=[],$e=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i;function C(t,n){for(var r in n)t[r]=n[r];return t}function _e(t){var n=t.parentNode;n&&n.removeChild(t)}function g(t,n,r){var e,i,o,a,s=arguments;if(n=C({},n),arguments.length>3)for(r=[r],e=3;e<arguments.length;e++)r.push(s[e]);if(r!=null&&(n.children=r),t!=null&&t.defaultProps!=null)for(i in t.defaultProps)n[i]===void 0&&(n[i]=t.defaultProps[i]);return a=n.key,(o=n.ref)!=null&&delete n.ref,a!=null&&delete n.key,Z(t,n,a,o)}function Z(t,n,r,e){var i={type:t,props:n,key:r,ref:e,__k:null,__p:null,__b:0,__e:null,l:null,__c:null,constructor:void 0};return b.vnode&&b.vnode(i),i}function X(t){return t.children}function Be(t){if(t==null||typeof t=="boolean")return null;if(typeof t=="string"||typeof t=="number")return Z(null,t,null,null);if(t.__e!=null||t.__c!=null){var n=Z(t.type,t.props,t.key,null);return n.__e=t.__e,n}return t}function B(t,n){this.props=t,this.context=n}function U(t,n){if(n==null)return t.__p?U(t.__p,t.__p.__k.indexOf(t)+1):null;for(var r;n<t.__k.length;n++)if((r=t.__k[n])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?U(t):null}function be(t){var n,r;if((t=t.__p)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,n=0;n<t.__k.length;n++)if((r=t.__k[n])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return be(t)}}function K(t){(!t.__d&&(t.__d=!0)&&L.push(t)===1||J!==b.debounceRendering)&&(J=b.debounceRendering,(b.debounceRendering||ve)(We))}function We(){var t,n,r,e,i,o,a,s;for(L.sort(function(h,u){return u.__v.__b-h.__v.__b});t=L.pop();)t.__d&&(r=void 0,e=void 0,o=(i=(n=t).__v).__e,a=n.__P,s=n.u,n.u=!1,a&&(r=[],e=ie(a,i,C({},i),n.__n,a.ownerSVGElement!==void 0,null,r,s,o??U(i)),ye(r,i),e!=o&&be(i)))}function me(t,n,r,e,i,o,a,s,h){var u,c,l,d,f,y,v,p=r&&r.__k||ne,m=p.length;if(s==A&&(s=o!=null?o[0]:m?U(r,0):null),u=0,n.__k=re(n.__k,function(_){if(_!=null){if(_.__p=n,_.__b=n.__b+1,(l=p[u])===null||l&&_.key==l.key&&_.type===l.type)p[u]=void 0;else for(c=0;c<m;c++){if((l=p[c])&&_.key==l.key&&_.type===l.type){p[c]=void 0;break}l=null}if(d=ie(t,_,l=l||A,e,i,o,a,null,s,h),(c=_.ref)&&l.ref!=c&&(v||(v=[])).push(c,_.__c||d,_),d!=null){if(y==null&&(y=d),_.l!=null)d=_.l,_.l=null;else if(o==l||d!=s||d.parentNode==null){e:if(s==null||s.parentNode!==t)t.appendChild(d);else{for(f=s,c=0;(f=f.nextSibling)&&c<m;c+=2)if(f==d)break e;t.insertBefore(d,s)}n.type=="option"&&(t.value="")}s=d.nextSibling,typeof n.type=="function"&&(n.l=d)}}return u++,_}),n.__e=y,o!=null&&typeof n.type!="function")for(u=o.length;u--;)o[u]!=null&&_e(o[u]);for(u=m;u--;)p[u]!=null&&we(p[u],p[u]);if(v)for(u=0;u<v.length;u++)pe(v[u],v[++u],v[++u])}function re(t,n,r){if(r==null&&(r=[]),t==null||typeof t=="boolean")n&&r.push(n(null));else if(Array.isArray(t))for(var e=0;e<t.length;e++)re(t[e],n,r);else r.push(n?n(Be(t)):t);return r}function je(t,n,r,e,i){var o;for(o in r)o in n||ce(t,o,null,r[o],e);for(o in n)i&&typeof n[o]!="function"||o==="value"||o==="checked"||r[o]===n[o]||ce(t,o,n[o],r[o],e)}function le(t,n,r){n[0]==="-"?t.setProperty(n,r):t[n]=typeof r=="number"&&$e.test(n)===!1?r+"px":r??""}function ce(t,n,r,e,i){var o,a,s,h,u;if(!((n=i?n==="className"?"class":n:n==="class"?"className":n)==="key"||n==="children"))if(n==="style")if(o=t.style,typeof r=="string")o.cssText=r;else{if(typeof e=="string"&&(o.cssText="",e=null),e)for(a in e)r&&a in r||le(o,a,"");if(r)for(s in r)e&&r[s]===e[s]||le(o,s,r[s])}else n[0]==="o"&&n[1]==="n"?(h=n!==(n=n.replace(/Capture$/,"")),u=n.toLowerCase(),n=(u in t?u:n).slice(2),r?(e||t.addEventListener(n,he,h),(t.t||(t.t={}))[n]=r):t.removeEventListener(n,he,h)):n!=="list"&&n!=="tagName"&&n!=="form"&&!i&&n in t?t[n]=r??"":typeof r!="function"&&n!=="dangerouslySetInnerHTML"&&(n!==(n=n.replace(/^xlink:?/,""))?r==null||r===!1?t.removeAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase()):t.setAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase(),r):r==null||r===!1?t.removeAttribute(n):t.setAttribute(n,r))}function he(t){return this.t[t.type](b.event?b.event(t):t)}function ie(t,n,r,e,i,o,a,s,h,u){var c,l,d,f,y,v,p,m,_,R,I=n.type;if(n.constructor!==void 0)return null;(c=b.__b)&&c(n);try{e:if(typeof I=="function"){if(m=n.props,_=(c=I.contextType)&&e[c.__c],R=c?_?_.props.value:c.__p:e,r.__c?p=(l=n.__c=r.__c).__p=l.__E:("prototype"in I&&I.prototype.render?n.__c=l=new I(m,R):(n.__c=l=new B(m,R),l.constructor=I,l.render=Ue),_&&_.sub(l),l.props=m,l.state||(l.state={}),l.context=R,l.__n=e,d=l.__d=!0,l.__h=[]),l.__s==null&&(l.__s=l.state),I.getDerivedStateFromProps!=null&&C(l.__s==l.state?l.__s=C({},l.__s):l.__s,I.getDerivedStateFromProps(m,l.__s)),d)I.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&a.push(l);else{if(I.getDerivedStateFromProps==null&&s==null&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(m,R),!s&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(m,l.__s,R)===!1){for(l.props=m,l.state=l.__s,l.__d=!1,l.__v=n,n.__e=h!=null?h!==r.__e?h:r.__e:null,n.__k=r.__k,c=0;c<n.__k.length;c++)n.__k[c]&&(n.__k[c].__p=n);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(m,l.__s,R)}for(f=l.props,y=l.state,l.context=R,l.props=m,l.state=l.__s,(c=b.__r)&&c(n),l.__d=!1,l.__v=n,l.__P=t,c=l.render(l.props,l.state,l.context),n.__k=re(c!=null&&c.type==X&&c.key==null?c.props.children:c),l.getChildContext!=null&&(e=C(C({},e),l.getChildContext())),d||l.getSnapshotBeforeUpdate==null||(v=l.getSnapshotBeforeUpdate(f,y)),me(t,n,r,e,i,o,a,h,u),l.base=n.__e;c=l.__h.pop();)l.__s&&(l.state=l.__s),c.call(l);d||f==null||l.componentDidUpdate==null||l.componentDidUpdate(f,y,v),p&&(l.__E=l.__p=null)}else n.__e=Le(r.__e,n,r,e,i,o,a,u);(c=b.diffed)&&c(n)}catch(Te){b.__e(Te,n,r)}return n.__e}function ye(t,n){for(var r;r=t.pop();)try{r.componentDidMount()}catch(e){b.__e(e,r.__v)}b.__c&&b.__c(n)}function Le(t,n,r,e,i,o,a,s){var h,u,c,l,d=r.props,f=n.props;if(i=n.type==="svg"||i,t==null&&o!=null){for(h=0;h<o.length;h++)if((u=o[h])!=null&&(n.type===null?u.nodeType===3:u.localName===n.type)){t=u,o[h]=null;break}}if(t==null){if(n.type===null)return document.createTextNode(f);t=i?document.createElementNS("http://www.w3.org/2000/svg",n.type):document.createElement(n.type),o=null}return n.type===null?d!==f&&(o!=null&&(o[o.indexOf(t)]=null),t.data=f):n!==r&&(o!=null&&(o=ne.slice.call(t.childNodes)),c=(d=r.props||A).dangerouslySetInnerHTML,l=f.dangerouslySetInnerHTML,s||(l||c)&&(l&&c&&l.__html==c.__html||(t.innerHTML=l&&l.__html||"")),je(t,f,d,i,s),n.__k=n.props.children,l||me(t,n,r,e,n.type!=="foreignObject"&&i,o,a,A,s),s||("value"in f&&f.value!==void 0&&f.value!==t.value&&(t.value=f.value==null?"":f.value),"checked"in f&&f.checked!==void 0&&f.checked!==t.checked&&(t.checked=f.checked))),t}function pe(t,n,r){try{typeof t=="function"?t(n):t.current=n}catch(e){b.__e(e,r)}}function we(t,n,r){var e,i,o;if(b.unmount&&b.unmount(t),(e=t.ref)&&pe(e,null,n),r||typeof t.type=="function"||(r=(i=t.__e)!=null),t.__e=t.l=null,(e=t.__c)!=null){if(e.componentWillUnmount)try{e.componentWillUnmount()}catch(a){b.__e(a,n)}e.base=e.__P=null}if(e=t.__k)for(o=0;o<e.length;o++)e[o]&&we(e[o],n,r);i!=null&&_e(i)}function Ue(t,n,r){return this.constructor(t,r)}function Ge(t,n,r){var e,i,o;b.__p&&b.__p(t,n),i=(e=r===ge)?null:n.__k,t=g(X,null,[t]),o=[],ie(n,n.__k=t,i||A,A,n.ownerSVGElement!==void 0,i?null:ne.slice.call(n.childNodes),o,!1,A,e),ye(o,t)}b={},B.prototype.setState=function(t,n){var r=this.__s!==this.state&&this.__s||(this.__s=C({},this.state));(typeof t!="function"||(t=t(r,this.props)))&&C(r,t),t!=null&&this.__v&&(this.u=!1,n&&this.__h.push(n),K(this))},B.prototype.forceUpdate=function(t){this.__v&&(t&&this.__h.push(t),this.u=!0,K(this))},B.prototype.render=X,L=[],ve=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,J=b.debounceRendering,b.__e=function(t,n,r){for(var e;n=n.__p;)if((e=n.__c)&&!e.__p)try{if(e.constructor&&e.constructor.getDerivedStateFromError!=null)e.setState(e.constructor.getDerivedStateFromError(t));else{if(e.componentDidCatch==null)continue;e.componentDidCatch(t)}return K(e.__E=e)}catch(i){t=i}throw t},ge=A;function Xe(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function ze(t,n,r){return n&&Xe(t.prototype,n),t}function E(){return E=Object.assign||function(t){for(var n=arguments,r=1;r<arguments.length;r++){var e=n[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},E.apply(this,arguments)}var Fe="[-\\+]?\\d+%?",Ve="[-\\+]?\\d*\\.\\d+%?",T="(?:"+Ve+")|(?:"+Fe+")",xe="[\\s|\\(]+("+T+")[,|\\s]+("+T+")[,|\\s]+("+T+")\\s*\\)?",ke="[\\s|\\(]+("+T+")[,|\\s]+("+T+")[,|\\s]+("+T+")[,|\\s]+("+T+")\\s*\\)?",Ke=new RegExp("rgb"+xe),qe=new RegExp("rgba"+ke),Ye=new RegExp("hsl"+xe),Je=new RegExp("hsla"+ke),z="^(?:#?|0x?)",M="([0-9a-fA-F]{1})",H="([0-9a-fA-F]{2})",Ze=new RegExp(z+M+M+M+"$"),Qe=new RegExp(z+M+M+M+M+"$"),et=new RegExp(z+H+H+H+"$"),tt=new RegExp(z+H+H+H+H+"$"),nt=2e3,rt=4e4,j=Math.log,O=Math.round,W=Math.floor;function S(t,n,r){return Math.min(Math.max(t,n),r)}function x(t,n){var r=t.indexOf("%")>-1,e=parseFloat(t);return r?n/100*e:e}function k(t){return parseInt(t,16)}function P(t){return t.toString(16).padStart(2,"0")}var $=function(){function t(r,e){this.$={h:0,s:0,v:0,a:1},r&&this.set(r),this.onChange=e,this.initialValue=E({},this.$)}var n=t.prototype;return n.set=function(e){if(typeof e=="string")/^(?:#?|0x?)[0-9a-fA-F]{3,8}$/.test(e)?this.hexString=e:/^rgba?/.test(e)?this.rgbString=e:/^hsla?/.test(e)&&(this.hslString=e);else if(typeof e=="object")e instanceof t?this.hsva=e.hsva:"r"in e&&"g"in e&&"b"in e?this.rgb=e:"h"in e&&"s"in e&&"v"in e?this.hsv=e:"h"in e&&"s"in e&&"l"in e?this.hsl=e:"kelvin"in e&&(this.kelvin=e.kelvin);else throw new Error("Invalid color value")},n.setChannel=function(e,i,o){var a;this[e]=E({},this[e],(a={},a[i]=o,a))},n.reset=function(){this.hsva=this.initialValue},n.clone=function(){return new t(this)},n.unbind=function(){this.onChange=void 0},t.hsvToRgb=function(e){var i=e.h/60,o=e.s/100,a=e.v/100,s=W(i),h=i-s,u=a*(1-o),c=a*(1-h*o),l=a*(1-(1-h)*o),d=s%6,f=[a,c,u,u,l,a][d],y=[l,a,a,c,u,u][d],v=[u,u,l,a,a,c][d];return{r:S(f*255,0,255),g:S(y*255,0,255),b:S(v*255,0,255)}},t.rgbToHsv=function(e){var i=e.r/255,o=e.g/255,a=e.b/255,s=Math.max(i,o,a),h=Math.min(i,o,a),u=s-h,c=0,l=s,d=s===0?0:u/s;switch(s){case h:c=0;break;case i:c=(o-a)/u+(o<a?6:0);break;case o:c=(a-i)/u+2;break;case a:c=(i-o)/u+4;break}return{h:c*60%360,s:S(d*100,0,100),v:S(l*100,0,100)}},t.hsvToHsl=function(e){var i=e.s/100,o=e.v/100,a=(2-i)*o,s=a<=1?a:2-a,h=s<1e-9?0:i*o/s;return{h:e.h,s:S(h*100,0,100),l:S(a*50,0,100)}},t.hslToHsv=function(e){var i=e.l*2,o=e.s*(i<=100?i:200-i)/100,a=i+o<1e-9?0:2*o/(i+o);return{h:e.h,s:S(a*100,0,100),v:S((i+o)/2,0,100)}},t.kelvinToRgb=function(e){var i=e/100,o,a,s;return i<66?(o=255,a=-155.25485562709179-.44596950469579133*(a=i-2)+104.49216199393888*j(a),s=i<20?0:-254.76935184120902+.8274096064007395*(s=i-10)+115.67994401066147*j(s)):(o=351.97690566805693+.114206453784165*(o=i-55)-40.25366309332127*j(o),a=325.4494125711974+.07943456536662342*(a=i-50)-28.0852963507957*j(a),s=255),{r:S(W(o),0,255),g:S(W(a),0,255),b:S(W(s),0,255)}},t.rgbToKelvin=function(e){for(var i=e.r,o=e.b,a=.4,s=nt,h=rt,u;h-s>a;){u=(h+s)*.5;var c=t.kelvinToRgb(u);c.b/c.r>=o/i?h=u:s=u}return u},ze(t,[{key:"hsv",get:function(){var e=this.$;return{h:e.h,s:e.s,v:e.v}},set:function(e){var i=this.$;if(e=E({},i,e),this.onChange){var o={h:!1,v:!1,s:!1,a:!1};for(var a in i)o[a]=e[a]!=i[a];this.$=e,(o.h||o.s||o.v||o.a)&&this.onChange(this,o)}else this.$=e}},{key:"hsva",get:function(){return E({},this.$)},set:function(e){this.hsv=e}},{key:"hue",get:function(){return this.$.h},set:function(e){this.hsv={h:e}}},{key:"saturation",get:function(){return this.$.s},set:function(e){this.hsv={s:e}}},{key:"value",get:function(){return this.$.v},set:function(e){this.hsv={v:e}}},{key:"alpha",get:function(){return this.$.a},set:function(e){this.hsv=E({},this.hsv,{a:e})}},{key:"kelvin",get:function(){return t.rgbToKelvin(this.rgb)},set:function(e){this.rgb=t.kelvinToRgb(e)}},{key:"red",get:function(){var e=this.rgb;return e.r},set:function(e){this.rgb=E({},this.rgb,{r:e})}},{key:"green",get:function(){var e=this.rgb;return e.g},set:function(e){this.rgb=E({},this.rgb,{g:e})}},{key:"blue",get:function(){var e=this.rgb;return e.b},set:function(e){this.rgb=E({},this.rgb,{b:e})}},{key:"rgb",get:function(){var e=t.hsvToRgb(this.$),i=e.r,o=e.g,a=e.b;return{r:O(i),g:O(o),b:O(a)}},set:function(e){this.hsv=E({},t.rgbToHsv(e),{a:e.a===void 0?1:e.a})}},{key:"rgba",get:function(){return E({},this.rgb,{a:this.alpha})},set:function(e){this.rgb=e}},{key:"hsl",get:function(){var e=t.hsvToHsl(this.$),i=e.h,o=e.s,a=e.l;return{h:O(i),s:O(o),l:O(a)}},set:function(e){this.hsv=E({},t.hslToHsv(e),{a:e.a===void 0?1:e.a})}},{key:"hsla",get:function(){return E({},this.hsl,{a:this.alpha})},set:function(e){this.hsl=e}},{key:"rgbString",get:function(){var e=this.rgb;return"rgb("+e.r+", "+e.g+", "+e.b+")"},set:function(e){var i,o,a,s,h=1;if((i=Ke.exec(e))?(o=x(i[1],255),a=x(i[2],255),s=x(i[3],255)):(i=qe.exec(e))&&(o=x(i[1],255),a=x(i[2],255),s=x(i[3],255),h=x(i[4],1)),i)this.rgb={r:o,g:a,b:s,a:h};else throw new Error("Invalid rgb string")}},{key:"rgbaString",get:function(){var e=this.rgba;return"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"},set:function(e){this.rgbString=e}},{key:"hexString",get:function(){var e=this.rgb;return"#"+P(e.r)+P(e.g)+P(e.b)},set:function(e){var i,o,a,s,h=255;if((i=Ze.exec(e))?(o=k(i[1])*17,a=k(i[2])*17,s=k(i[3])*17):(i=Qe.exec(e))?(o=k(i[1])*17,a=k(i[2])*17,s=k(i[3])*17,h=k(i[4])*17):(i=et.exec(e))?(o=k(i[1]),a=k(i[2]),s=k(i[3])):(i=tt.exec(e))&&(o=k(i[1]),a=k(i[2]),s=k(i[3]),h=k(i[4])),i)this.rgb={r:o,g:a,b:s,a:h/255};else throw new Error("Invalid hex string")}},{key:"hex8String",get:function(){var e=this.rgba;return"#"+P(e.r)+P(e.g)+P(e.b)+P(W(e.a*255))},set:function(e){this.hexString=e}},{key:"hslString",get:function(){var e=this.hsl;return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},set:function(e){var i,o,a,s,h=1;if((i=Ye.exec(e))?(o=x(i[1],360),a=x(i[2],100),s=x(i[3],100)):(i=Je.exec(e))&&(o=x(i[1],360),a=x(i[2],100),s=x(i[3],100),h=x(i[4],1)),i)this.hsl={h:o,s:a,l:s,a:h};else throw new Error("Invalid hsl string")}},{key:"hslaString",get:function(){var e=this.hsla;return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},set:function(e){this.hslString=e}}]),t}(),it={sliderShape:"bar",sliderType:"value",minTemperature:2200,maxTemperature:11e3};function oe(t){var n,r=t.width,e=t.sliderSize,i=t.borderWidth,o=t.handleRadius,a=t.padding,s=t.sliderShape,h=t.layoutDirection==="horizontal";return e=(n=e)!=null?n:a*2+o*2,s==="circle"?{handleStart:t.padding+t.handleRadius,handleRange:r-a*2-o*2,width:r,height:r,cx:r/2,cy:r/2,radius:r/2-i/2}:{handleStart:e/2,handleRange:r-e,radius:e/2,x:0,y:0,width:h?e:r,height:h?r:e}}function ot(t,n){var r=n.hsva,e=n.rgb;switch(t.sliderType){case"red":return e.r/2.55;case"green":return e.g/2.55;case"blue":return e.b/2.55;case"alpha":return r.a*100;case"kelvin":var i=t.minTemperature,o=t.maxTemperature,a=o-i,s=(n.kelvin-i)/a*100;return Math.max(0,Math.min(s,100));case"hue":return r.h/=3.6;case"saturation":return r.s;case"value":default:return r.v}}function at(t,n,r){var e=oe(t),i=e.handleRange,o=e.handleStart,a;t.layoutDirection==="horizontal"?a=-1*r+i+o:a=n-o,a=Math.max(Math.min(a,i),0);var s=Math.round(100/i*a);switch(t.sliderType){case"kelvin":var h=t.minTemperature,u=t.maxTemperature,c=u-h;return h+c*(s/100);case"alpha":return s/100;case"hue":return s*3.6;case"red":case"blue":case"green":return s*2.55;default:return s}}function st(t,n){var r=oe(t),e=r.width,i=r.height,o=r.handleRange,a=r.handleStart,s=t.layoutDirection==="horizontal",h=ot(t,n),u=s?e/2:i/2,c=a+h/100*o;return s&&(c=-1*c+o+a*2),{x:s?u:c,y:s?c:u}}function lt(t,n){var r=n.hsv,e=n.rgb;switch(t.sliderType){case"red":return[[0,"rgb(0,"+e.g+","+e.b+")"],[100,"rgb(255,"+e.g+","+e.b+")"]];case"green":return[[0,"rgb("+e.r+",0,"+e.b+")"],[100,"rgb("+e.r+",255,"+e.b+")"]];case"blue":return[[0,"rgb("+e.r+","+e.g+",0)"],[100,"rgb("+e.r+","+e.g+",255)"]];case"alpha":return[[0,"rgba("+e.r+","+e.g+","+e.b+",0)"],[100,"rgb("+e.r+","+e.g+","+e.b+")"]];case"kelvin":for(var i=[],o=t.minTemperature,a=t.maxTemperature,s=8,h=a-o,u=o,c=0;u<a;u+=h/s,c+=1){var l=$.kelvinToRgb(u),d=l.r,f=l.g,y=l.b;i.push([100/s*c,"rgb("+d+","+f+","+y+")"])}return i;case"hue":return[[0,"#f00"],[16.666,"#ff0"],[33.333,"#0f0"],[50,"#0ff"],[66.666,"#00f"],[83.333,"#f0f"],[100,"#f00"]];case"saturation":var v=$.hsvToHsl({h:r.h,s:0,v:r.v}),p=$.hsvToHsl({h:r.h,s:100,v:r.v});return[[0,"hsl("+v.h+","+v.s+"%,"+v.l+"%)"],[100,"hsl("+p.h+","+p.s+"%,"+p.l+"%)"]];case"value":default:var m=$.hsvToHsl({h:r.h,s:r.s,v:100});return[[0,"#000"],[100,"hsl("+m.h+","+m.s+"%,"+m.l+"%)"]]}}var Ee=Math.PI*2,ct=function(n,r){return(n%r+r)%r},Se=function(n,r){return Math.sqrt(n*n+r*r)};function Ie(t){return t.width/2-t.padding-t.handleRadius-t.borderWidth}function ht(t,n,r){var e=F(t),i=e.cx,o=e.cy,a=t.width/2;return Se(i-n,o-r)<a}function F(t){var n=t.width/2;return{width:t.width,radius:n-t.borderWidth,cx:n,cy:n}}function Re(t,n,r){var e=t.wheelAngle,i=t.wheelDirection;return r&&i==="clockwise"?n=e+n:i==="clockwise"?n=360-e+n:r&&i==="anticlockwise"?n=e+180-n:i==="anticlockwise"&&(n=e-n),ct(n,360)}function ut(t,n){var r=n.hsv,e=F(t),i=e.cx,o=e.cy,a=Ie(t),s=(180+Re(t,r.h,!0))*(Ee/360),h=r.s/100*a,u=t.wheelDirection==="clockwise"?-1:1;return{x:i+h*Math.cos(s)*u,y:o+h*Math.sin(s)*u}}function ue(t,n,r){var e=F(t),i=e.cx,o=e.cy,a=Ie(t);n=i-n,r=o-r;var s=Re(t,Math.atan2(-r,-n)*(360/Ee)),h=Math.min(Se(n,r),a);return{h:Math.round(s),s:Math.round(100/a*h)}}function ae(t){var n=t.width,r=t.boxHeight,e=t.padding,i=t.handleRadius;return{width:n,height:r??n,radius:e+i}}function de(t,n,r){var e=ae(t),i=e.width,o=e.height,a=e.radius,s=a,h=i-a*2,u=o-a*2,c=(n-s)/h*100,l=(r-s)/u*100;return{s:Math.max(0,Math.min(c,100)),v:Math.max(0,Math.min(100-l,100))}}function dt(t,n){var r=ae(t),e=r.width,i=r.height,o=r.radius,a=n.hsv,s=o,h=e-o*2,u=i-o*2;return{x:s+a.s/100*h,y:s+(u-a.v/100*u)}}function ft(t,n){var r=n.hue;return[[[0,"#fff"],[100,"hsl("+r+",100%,50%)"]],[[0,"rgba(0,0,0,0)"],[100,"#000"]]]}var q;function vt(t){q||(q=document.getElementsByTagName("base"));var n=window.navigator.userAgent,r=/^((?!chrome|android).)*safari/i.test(n),e=/iPhone|iPod|iPad/i.test(n),i=window.location;return(r||e)&&q.length>0?i.protocol+"//"+i.host+i.pathname+i.search+t:t}function Ce(t,n,r,e){for(var i=0;i<e.length;i++){var o=e[i].x-n,a=e[i].y-r,s=Math.sqrt(o*o+a*a);if(s<t.handleRadius)return i}return null}function se(t){return{boxSizing:"border-box",border:t.borderWidth+"px solid "+t.borderColor}}function Q(t,n,r){return t+"-gradient("+n+", "+r.map(function(e){var i=e[0],o=e[1];return o+" "+i+"%"}).join(",")+")"}function w(t){return typeof t=="string"?t:t+"px"}var gt={width:300,height:300,color:"#fff",colors:[],padding:6,layoutDirection:"vertical",borderColor:"#fff",borderWidth:0,handleRadius:8,activeHandleRadius:null,handleSvg:null,handleProps:{x:0,y:0},wheelLightness:!0,wheelAngle:0,wheelDirection:"anticlockwise",sliderSize:null,sliderMargin:12,boxHeight:null},fe=["mousemove","touchmove","mouseup","touchend"],V=function(t){function n(r){t.call(this,r),this.uid=(Math.random()+1).toString(36).substring(5)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.render=function(e){var i=this.handleEvent.bind(this),o={onMouseDown:i,ontouchstart:i},a=e.layoutDirection==="horizontal",s=e.margin===null?e.sliderMargin:e.margin,h={overflow:"visible",display:a?"inline-block":"block"};return e.index>0&&(h[a?"marginLeft":"marginTop"]=s),g(X,null,e.children(this.uid,o,h))},n.prototype.handleEvent=function(e){var i=this,o=this.props.onInput,a=this.base.getBoundingClientRect();e.preventDefault();var s=e.touches?e.changedTouches[0]:e,h=s.clientX-a.left,u=s.clientY-a.top;switch(e.type){case"mousedown":case"touchstart":var c=o(h,u,0);c!==!1&&fe.forEach(function(l){document.addEventListener(l,i,{passive:!1})});break;case"mousemove":case"touchmove":o(h,u,1);break;case"mouseup":case"touchend":o(h,u,2),fe.forEach(function(l){document.removeEventListener(l,i,{passive:!1})});break}},n}(B);function N(t){var n=t.r,r=t.url,e=n,i=n;return g("svg",{className:"IroHandle IroHandle--"+t.index+" "+(t.isActive?"IroHandle--isActive":""),style:{"-webkit-tap-highlight-color":"rgba(0, 0, 0, 0);",transform:"translate("+w(t.x)+", "+w(t.y)+")",willChange:"transform",top:w(-n),left:w(-n),width:w(n*2),height:w(n*2),position:"absolute",overflow:"visible"}},r&&g("use",Object.assign({xlinkHref:vt(r)},t.props)),!r&&g("circle",{cx:e,cy:i,r:n,fill:"none","stroke-width":2,stroke:"#000"}),!r&&g("circle",{cx:e,cy:i,r:n-2,fill:t.fill,"stroke-width":2,stroke:"#fff"}))}N.defaultProps={fill:"none",x:0,y:0,r:8,url:null,props:{x:0,y:0}};function G(t){var n=t.activeIndex,r=n!==void 0&&n<t.colors.length?t.colors[n]:t.color,e=oe(t),i=e.width,o=e.height,a=e.radius,s=st(t,r),h=lt(t,r);function u(c,l,d){var f=at(t,c,l);t.parent.inputActive=!0,r[t.sliderType]=f,t.onInput(d,t.id)}return g(V,Object.assign({},t,{onInput:u}),function(c,l,d){return g("div",Object.assign({},l,{className:"IroSlider",style:Object.assign({},{position:"relative",width:w(i),height:w(o),borderRadius:w(a),background:"conic-gradient(#ccc 25%, #fff 0 50%, #ccc 0 75%, #fff 0)",backgroundSize:"8px 8px"},d)}),g("div",{className:"IroSliderGradient",style:Object.assign({},{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:w(a),background:Q("linear",t.layoutDirection==="horizontal"?"to top":"to right",h)},se(t))}),g(N,{isActive:!0,index:r.index,r:t.handleRadius,url:t.handleSvg,props:t.handleProps,x:s.x,y:s.y}))})}G.defaultProps=Object.assign({},it);function _t(t){var n=ae(t),r=n.width,e=n.height,i=n.radius,o=t.colors,a=t.parent,s=t.activeIndex,h=s!==void 0&&s<t.colors.length?t.colors[s]:t.color,u=ft(t,h),c=o.map(function(d){return dt(t,d)});function l(d,f,y){if(y===0){var v=Ce(t,d,f,c);v!==null?a.setActiveColor(v):(a.inputActive=!0,h.hsv=de(t,d,f),t.onInput(y,t.id))}else y===1&&(a.inputActive=!0,h.hsv=de(t,d,f));t.onInput(y,t.id)}return g(V,Object.assign({},t,{onInput:l}),function(d,f,y){return g("div",Object.assign({},f,{className:"IroBox",style:Object.assign({},{width:w(r),height:w(e),position:"relative"},y)}),g("div",{className:"IroBox",style:Object.assign({},{width:"100%",height:"100%",borderRadius:w(i)},se(t),{background:Q("linear","to bottom",u[1])+","+Q("linear","to right",u[0])})}),o.filter(function(v){return v!==h}).map(function(v){return g(N,{isActive:!1,index:v.index,fill:v.hslString,r:t.handleRadius,url:t.handleSvg,props:t.handleProps,x:c[v.index].x,y:c[v.index].y})}),g(N,{isActive:!0,index:h.index,fill:h.hslString,r:t.activeHandleRadius||t.handleRadius,url:t.handleSvg,props:t.handleProps,x:c[h.index].x,y:c[h.index].y}))})}var bt="conic-gradient(red, yellow, lime, aqua, blue, magenta, red)",mt="conic-gradient(red, magenta, blue, aqua, lime, yellow, red)";function Ae(t){var n=F(t),r=n.width,e=t.colors;t.borderWidth;var i=t.parent,o=t.color,a=o.hsv,s=e.map(function(c){return ut(t,c)}),h={position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",boxSizing:"border-box"};function u(c,l,d){if(d===0){if(!ht(t,c,l))return!1;var f=Ce(t,c,l,s);f!==null?i.setActiveColor(f):(i.inputActive=!0,o.hsv=ue(t,c,l),t.onInput(d,t.id))}else d===1&&(i.inputActive=!0,o.hsv=ue(t,c,l));t.onInput(d,t.id)}return g(V,Object.assign({},t,{onInput:u}),function(c,l,d){return g("div",Object.assign({},l,{className:"IroWheel",style:Object.assign({},{width:w(r),height:w(r),position:"relative"},d)}),g("div",{className:"IroWheelHue",style:Object.assign({},h,{transform:"rotateZ("+(t.wheelAngle+90)+"deg)",background:t.wheelDirection==="clockwise"?bt:mt})}),g("div",{className:"IroWheelSaturation",style:Object.assign({},h,{background:"radial-gradient(circle closest-side, #fff, transparent)"})}),t.wheelLightness&&g("div",{className:"IroWheelLightness",style:Object.assign({},h,{background:"#000",opacity:1-a.v/100})}),g("div",{className:"IroWheelBorder",style:Object.assign({},h,se(t))}),e.filter(function(f){return f!==o}).map(function(f){return g(N,{isActive:!1,index:f.index,fill:f.hslString,r:t.handleRadius,url:t.handleSvg,props:t.handleProps,x:s[f.index].x,y:s[f.index].y})}),g(N,{isActive:!0,index:o.index,fill:o.hslString,r:t.activeHandleRadius||t.handleRadius,url:t.handleSvg,props:t.handleProps,x:s[o.index].x,y:s[o.index].y}))})}function yt(t){var n=function(r,e){var i,o=document.createElement("div");Ge(g(t,Object.assign({},{ref:function(s){return i=s}},e)),o);function a(){var s=r instanceof Element?r:document.querySelector(r);s.appendChild(i.base),i.onMount(s)}return document.readyState!=="loading"?a():document.addEventListener("DOMContentLoaded",a),i};return n.prototype=t.prototype,Object.assign(n,t),n.__component=t,n}var Pe=function(t){function n(r){var e=this;t.call(this,r),this.colors=[],this.inputActive=!1,this.events={},this.activeEvents={},this.deferredEvents={},this.id=r.id;var i=r.colors.length>0?r.colors:[r.color];i.forEach(function(o){return e.addColor(o)}),this.setActiveColor(0),this.state=Object.assign({},r,{color:this.color,colors:this.colors,layout:r.layout})}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.addColor=function(e,i){i===void 0&&(i=this.colors.length);var o=new $(e,this.onColorChange.bind(this));this.colors.splice(i,0,o),this.colors.forEach(function(a,s){return a.index=s}),this.state&&this.setState({colors:this.colors}),this.deferredEmit("color:init",o)},n.prototype.removeColor=function(e){var i=this.colors.splice(e,1)[0];i.unbind(),this.colors.forEach(function(o,a){return o.index=a}),this.state&&this.setState({colors:this.colors}),i.index===this.color.index&&this.setActiveColor(0),this.emit("color:remove",i)},n.prototype.setActiveColor=function(e){this.color=this.colors[e],this.state&&this.setState({color:this.color}),this.emit("color:setActive",this.color)},n.prototype.setColors=function(e,i){var o=this;i===void 0&&(i=0),this.colors.forEach(function(a){return a.unbind()}),this.colors=[],e.forEach(function(a){return o.addColor(a)}),this.setActiveColor(i),this.emit("color:setAll",this.colors)},n.prototype.on=function(e,i){var o=this,a=this.events;(Array.isArray(e)?e:[e]).forEach(function(s){(a[s]||(a[s]=[])).push(i),o.deferredEvents[s]&&(o.deferredEvents[s].forEach(function(h){i.apply(null,h)}),o.deferredEvents[s]=[])})},n.prototype.off=function(e,i){var o=this;(Array.isArray(e)?e:[e]).forEach(function(a){var s=o.events[a];s&&s.splice(s.indexOf(i),1)})},n.prototype.emit=function(e){for(var i=this,o=[],a=arguments.length-1;a-- >0;)o[a]=arguments[a+1];var s=this.activeEvents,h=s.hasOwnProperty(e)?s[e]:!1;if(!h){s[e]=!0;var u=this.events[e]||[];u.forEach(function(c){return c.apply(i,o)}),s[e]=!1}},n.prototype.deferredEmit=function(e){for(var i,o=[],a=arguments.length-1;a-- >0;)o[a]=arguments[a+1];var s=this.deferredEvents;(i=this).emit.apply(i,[e].concat(o)),(s[e]||(s[e]=[])).push(o)},n.prototype.setOptions=function(e){this.setState(e)},n.prototype.resize=function(e){this.setOptions({width:e})},n.prototype.reset=function(){this.colors.forEach(function(e){return e.reset()}),this.setState({colors:this.colors})},n.prototype.onMount=function(e){this.el=e,this.deferredEmit("mount",this)},n.prototype.onColorChange=function(e,i){this.setState({color:this.color}),this.inputActive&&(this.inputActive=!1,this.emit("input:change",e,i)),this.emit("color:change",e,i)},n.prototype.emitInputEvent=function(e,i){e===0?this.emit("input:start",this.color,i):e===1?this.emit("input:move",this.color,i):e===2&&this.emit("input:end",this.color,i)},n.prototype.render=function(e,i){var o=this,a=i.layout;if(!Array.isArray(a)){switch(a){default:a=[{component:Ae},{component:G}]}i.transparency&&a.push({component:G,options:{sliderType:"alpha"}})}return g("div",{class:"IroColorPicker",id:i.id,style:{display:i.display}},a.map(function(s,h){var u=s.component,c=s.options;return g(u,Object.assign({},i,c,{ref:void 0,onInput:o.emitInputEvent.bind(o),parent:o,index:h}))}))},n}(B);Pe.defaultProps=Object.assign({},gt,{colors:[],display:"block",id:null,layout:"default",margin:null});var pt=yt(Pe),ee;(function(t){t.version="5.5.2",t.Color=$,t.ColorPicker=pt,function(n){n.h=g,n.ComponentBase=V,n.Handle=N,n.Slider=G,n.Wheel=Ae,n.Box=_t}(t.ui||(t.ui={}))})(ee||(ee={}));var wt=ee;const Y=wt.ColorPicker("#color",{width:300,height:300,color:"#29A4DA"});function xt(){const t=document.getElementById("modal"),n=document.getElementById("info-button");n.onclick=()=>{t.style.display="block",n.style.display="none"};const r=document.getElementById("modal-close-button");r.onclick=()=>{t.style.display="none",n.style.display="block"}}function kt(t,n,r){xt();const e=document.getElementById("position");e.width=document.getElementById("position-content").clientWidth*.9,e.height=e.width*r/n;const i=e.getContext("2d");let o=[Math.round(e.width/2),Math.round(e.height/2)];i.fillStyle=Y.color.hexString,i.beginPath(),i.arc(o[0],o[1],5,0,2*Math.PI),i.fill(),e.onclick=d=>{i.clearRect(0,0,e.width,e.height),o=[d.offsetX,d.offsetY],i.beginPath(),i.arc(o[0],o[1],5,0,2*Math.PI),i.fill()},Y.on("color:change",function(d){i.fillStyle=d.hexString,i.clearRect(0,0,e.width,e.height),i.beginPath(),i.arc(o[0],o[1],5,0,2*Math.PI),i.fill()});const a=document.getElementById("create-button");a.removeAttribute("disabled");const s=document.getElementById("creature_creator_form"),h=()=>{const d=new FormData(s),f=v=>Math.floor(v*(n/e.width)),y=Y.color.hexString.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(v,p,m,_)=>"#"+p+p+m+m+_+_).substring(1).match(/.{2}/g).map(v=>parseInt(v,16));return{position:[f(o[0]),f(o[1])],color:y,personality:{openness:parseInt(d.get("openness")),conscientiousness:parseInt(d.get("conscientiousness")),extraversion:parseInt(d.get("extraversion")),agreeableness:parseInt(d.get("agreeableness")),neuroticism:parseInt(d.get("neuroticism"))}}};s.onsubmit=d=>{d.preventDefault(),t.send({type:"create",...h()}),a.setAttribute("disabled",""),setTimeout(()=>{a.removeAttribute("disabled")},2e3)};const u=document.getElementById("details-button");u.removeAttribute("disabled");const c=document.getElementById("details");u.onclick=()=>{if(console.log(c.style.display),c.style.display==="none"){c.style.display="block";return}c.style.display="none"};const l=()=>{const d=h(),f=new Ne(0,{position:Oe(...d.position),color:new De(d.color),personality:d.personality,ancestors:new Set});c.innerHTML=JSON.stringify({coloringSpread:f.coloringSpread,coloringPercentage:f.coloringPercentage,speed:f.speed,attraction:f.attraction,viewport:f.viewport,preference:f.preference.p},null,"	")};l(),s.onchange=l,console.log("creator setup")}async function te(){const t=await Me(He.SYNC_SERVER_URL).catch(r=>{D(r)});if(typeof t>"u"){setTimeout(async()=>await te().catch(D),1e3);return}t.on("close",async()=>{setTimeout(async()=>await te().catch(D),1e3)});const n=new URLSearchParams(window.location.search).get("id");if(n===null){D("no id provided");return}t.send({type:"init",connection_type:"controller",id:n}),t.on("message",r=>{switch(r.type){case"error":D(r.message);break;case"config":kt(t,r.width,r.height);break}})}te().catch(D);
